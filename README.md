## ğŸ“Š Credit Risk / Loan Default Prediction

A production-style **credit risk prediction system** that estimates the **probability of loan default** using historical LendingClub data.  
The model is trained with strict leakage control, evaluated using ROC-AUC, and deployed as a **FastAPI service** for real-time inference.

---

## ğŸš€ Live Demo (Try It Yourself)

The model is live and publicly accessible.
You can test it without running any code.

Predict (POST)
- https://credit-risk-api-1vg9.onrender.com/predict

View Reusable Sample Inputs (GET)
- https://credit-risk-api-1vg9.onrender.com/samples

One-Click Sample Prediction â€“ High Risk Case (POST)
- https://credit-risk-api-1vg9.onrender.com/predict/high_risk

Swagger UI (Interactive API Docs)
- https://credit-risk-api-1vg9.onrender.com/docs

âš ï¸ Note: Hosted on Render free tier. The service may take ~30 seconds to wake up on first request.

---

## ğŸ” Problem Statement

Given loan application and credit bureau information **available at loan issuance**, predict the **probability that a loan will default**.

This problem is critical for:
- Loan approval decisions  
- Risk-based pricing  
- Portfolio risk management  

---

## ğŸ§  Solution Overview

**Approach**
- Binary classification: Default vs Non-default
- Time-based train/test split (prevents data leakage)
- Baseline + advanced model comparison
- Probability-based evaluation (not accuracy)

**Final Model**
- **XGBoost (Gradient Boosted Trees)**
- Regularized configuration suitable for credit risk data
- Outputs **probability of default**

---

## ğŸ—‚ï¸ Dataset

- **Source**: LendingClub Loan Data  
- **Size**: ~2.2M rows, 150+ raw features  
- **Final features**: ~45 model-ready features  

### Target Definition
- `1` â†’ Default (Charged Off / Default)  
- `0` â†’ Non-default (Fully Paid / Current)  

---

## ğŸ§¹ Data Preparation

Key preprocessing steps:
- Removed all post-issuance leakage features
- Domain-driven feature selection
- Missing value handling with indicator flags
- Credit history feature engineering
- Log transforms for skewed financial variables
- One-hot encoding for categorical variables
- Strict **time-based split** using `issue_d`

---

## ğŸ“ˆ Modeling & Evaluation

### Models Trained
1. Logistic Regression (Baseline)
2. XGBoost Classifier (Final)

### Metric
- **ROC-AUC** (appropriate for imbalanced credit risk data)

### Results
| Model | ROC-AUC |
|------|--------|
| Logistic Regression | ~0.68 |
| XGBoost | **~0.71** |

---

## ğŸš€ Deployment

The trained model is deployed as a **FastAPI inference service**.

### Architecture
Client â†’ FastAPI â†’ Validation â†’ XGBoost â†’ Probability of Default

### Design Choice
This API expects **model-ready features** generated by an upstream feature pipeline, mirroring real-world credit risk systems.

---

## ğŸ“ Project Structure

```
credit-risk-model/
â”‚
â”œâ”€â”€ notebooks/
â”‚   â””â”€â”€ manage.ipynb
â”‚
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ model.py
â”‚   â”œâ”€â”€ schemas.py
â”‚   â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ model/
â”‚   â”œâ”€â”€ xgb_model.json
â”‚   â”œâ”€â”€ feature_order.json
â”‚   â””â”€â”€ sample_inputs.json
â”‚
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

---

## ğŸ§ª API Usage

### Start API
```bash
uvicorn app.main:app --host 0.0.0.0 --port $PORT
```

### Swagger UI
```
/docs
```

### Predict Endpoint
`POST /predict`

Response example:
```json
{
  "probability_of_default": 0.2741
}
```

---

## ğŸ§° Reusable Demo Inputs

- `GET /samples` provides realistic test payloads
- Enables fast demos without manual data entry

---

## ğŸ“¦ Dependencies

- xgboost
- scikit-learn
- pandas, numpy
- fastapi, uvicorn
- pydantic

---

## ğŸ§  What This Project Demonstrates

- Credit risk modeling best practices
- Strong leakage prevention
- Model comparison discipline
- Production-style ML deployment
- Clean separation of training vs inference

---

## ğŸš§ Future Improvements

- SHAP explainability
- Risk banding (Low / Medium / High)
- Threshold optimization
- Simple frontend UI
